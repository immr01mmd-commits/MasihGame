<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Mine Legends X</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{margin:0;font-family:sans-serif;background:#020617;color:white;display:flex;justify-content:center;align-items:center;height:100vh}
.app{max-width:400px;width:100%;background:#0f172a;border-radius:20px;padding:14px}
.stats{display:flex;justify-content:space-between;background:#020617;padding:10px;border-radius:12px}
.mine{width:160px;height:160px;border-radius:50%;background:radial-gradient(#22c55e,#166534);margin:14px auto;display:flex;justify-content:center;align-items:center;font-size:46px;cursor:pointer}
.tabs{display:flex;gap:6px}
.tabs button{flex:1;border:none;border-radius:10px;padding:6px;background:#1e293b;color:white}
.box{display:none;margin-top:10px}
.box.active{display:block}
.card{background:#1e293b;border-radius:12px;padding:10px;margin-bottom:6px}
button{border:none;border-radius:10px;padding:6px;background:#38bdf8;width:100%}
.log{text-align:center;font-size:13px;opacity:.8}
.char{text-align:center;font-size:40px}
</style>
</head>

<body>
<div class="app">
<h3 style="text-align:center">â› Mine Legends X</h3>

<div class="stats">
  <div>ğŸ’° <span id="coin">0</span></div>
  <div>â­ <span id="level">1</span></div>
</div>

<div class="char">ğŸ‘·</div>
<div class="mine" onclick="mine()" id="pick">â›</div>

<div class="tabs">
  <button onclick="tab('up')">â¬†ï¸</button>
  <button onclick="tab('quest')">ğŸ“œ</button>
  <button onclick="tab('item')">ğŸ’</button>
  <button onclick="tab('rank')">ğŸ†</button>
</div>

<div id="up" class="box active">
  <div class="card">Power: <span id="power">1</span>
    <button onclick="upgrade()">Upgrade (<span id="pCost">10</span>)</button>
  </div>
</div>

<div id="quest" class="box">
  <div class="card">Mine 100 <button onclick="quest(100,150)">Claim</button></div>
  <div class="card">Mine 500 <button onclick="quest(500,400)">Claim</button></div>
  <div class="card">Reach Lv 5 <button onclick="questLevel(5,500)">Claim</button></div>
</div>

<div id="item" class="box">
  <div class="card">âš¡ Booster (200) <button onclick="booster()">Use</button></div>
  <div class="card">ğŸ§¿ Relic (500) <button onclick="relic()">Buy</button></div>
</div>

<div id="rank" class="box">
  <div class="card">
    <b id="pname"></b><br>
    Best Coin: <span id="best">0</span>
  </div>
</div>

<div class="log" id="log">Ready</div>
</div>

<script>
const tg=window.Telegram.WebApp; tg.ready(); tg.expand();

// ØµØ¯Ø§
const beep=(f)=>{let a=new AudioContext(),o=a.createOscillator();o.frequency.value=f;o.connect(a.destination);o.start();setTimeout(()=>o.stop(),100)}

let d=JSON.parse(localStorage.getItem("mineX"))||{
  coin:0,power:1,level:1,xp:0,pCost:10,best:0,
  name:prompt("Ø§Ø³Ù… Ù¾Ù„ÛŒØ±ØŸ")||"Miner"
};

function mine(){
  let gain=d.power;
  d.coin+=gain;
  d.xp+=gain;
  if(d.xp>=d.level*20){d.level++;d.xp=0;beep(700)}
  beep(300);
  save();
}

function upgrade(){
  if(d.coin>=d.pCost){
    d.coin-=d.pCost;
    d.power++;
    d.pCost*=2;
    beep(600);
    save();
  }
}

function quest(c,r){
  if(d.coin>=c){
    d.coin+=r;
    beep(800);
    save();
  }
}

function questLevel(l,r){
  if(d.level>=l){
    d.coin+=r;
    save();
  }
}

function booster(){
  if(d.coin>=200){
    d.coin-=200;
    d.power*=2;
    setTimeout(()=>{d.power/=2;save()},30000);
    save();
  }
}

function relic(){
  if(d.coin>=500){
    d.coin-=500;
    d.power++;
    save();
  }
}

function tab(id){
  document.querySelectorAll(".box").forEach(b=>b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function save(){
  d.best=Math.max(d.best,d.coin);
  localStorage.setItem("mineX",JSON.stringify(d));
  coin.innerText=d.coin;
  power.innerText=d.power;
  level.innerText=d.level;
  pCost.innerText=d.pCost;
  best.innerText=d.best;
  pname.innerText="ğŸ‘¤ "+d.name;
}

save();
</script>
</body>
</html>
